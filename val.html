<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Jamilah ðŸ’«</title>
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;700&family=Playfair+Display:wght@400;500;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    :root {
        --primary: #e63976;
        --secondary: #ffb3c6;
        --accent: #ffd7ba;
        --dark: #1a1423;
        --light: #f8f9fa;
        --glass: rgba(255, 255, 255, 0.08);
        --subtle-glow: 0 0 30px rgba(230, 57, 118, 0.15);
    }

    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    body {
        height: 100vh;
        background: 
            radial-gradient(circle at 10% 20%, rgba(230, 57, 118, 0.1) 0%, transparent 40%),
            radial-gradient(circle at 90% 30%, rgba(255, 179, 198, 0.08) 0%, transparent 40%),
            radial-gradient(circle at 50% 80%, rgba(255, 215, 186, 0.05) 0%, transparent 40%),
            linear-gradient(135deg, #1a1423 0%, #2d1b3d 100%);
        font-family: 'Poppins', sans-serif;
        color: var(--light);
        overflow: hidden;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
    }

    #bg-particles {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 0;
    }

    .container {
        position: relative;
        z-index: 10;
        width: 90%;
        max-width: 520px;
        animation: gentleFloat 8s ease-in-out infinite;
    }

    @keyframes gentleFloat {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
    }

    .card {
        background: var(--glass);
        backdrop-filter: blur(20px) saturate(160%);
        -webkit-backdrop-filter: blur(20px) saturate(160%);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 24px;
        padding: 50px 40px;
        text-align: center;
        box-shadow: 
            0 20px 40px rgba(0, 0, 0, 0.3),
            var(--subtle-glow);
        transition: transform 0.5s ease, box-shadow 0.5s ease;
        position: relative;
        overflow: hidden;
    }

    .card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(90deg, transparent, var(--primary), transparent);
        z-index: 1;
    }

    h1 {
        font-family: 'Playfair Display', serif;
        font-size: 3.2rem;
        font-weight: 700;
        color: white;
        margin-bottom: 20px;
        position: relative;
        display: inline-block;
    }

    h1::after {
        content: '';
        position: absolute;
        bottom: -8px;
        left: 25%;
        width: 50%;
        height: 2px;
        background: linear-gradient(90deg, transparent, var(--primary), transparent);
    }

    .typing-text {
        min-height: 120px;
        font-size: 1.15rem;
        line-height: 1.75;
        margin-bottom: 25px;
        position: relative;
        padding: 0 5px;
        font-weight: 300;
        color: rgba(255, 255, 255, 0.9);
    }

    .typing-cursor {
        display: inline-block;
        width: 2px;
        height: 1.15rem;
        background-color: var(--primary);
        animation: blink 1s infinite;
        margin-left: 2px;
        vertical-align: middle;
    }

    @keyframes blink {
        0%, 100% { opacity: 1; }
        50% { opacity: 0; }
    }

    .definition-box {
        background: rgba(255, 255, 255, 0.05);
        padding: 18px;
        border-radius: 12px;
        margin: 20px 0;
        text-align: left;
        display: none;
        border-left: 3px solid var(--primary);
        backdrop-filter: blur(10px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        animation: slideIn 0.6s ease-out;
        font-size: 0.98rem;
    }

    @keyframes slideIn {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .def-title {
        font-family: 'Playfair Display', serif;
        font-weight: 600;
        color: var(--secondary);
        font-size: 0.85rem;
        letter-spacing: 1.5px;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .def-title i {
        color: var(--accent);
    }

    .def-content {
        font-size: 0.98rem;
        line-height: 1.6;
        color: rgba(255, 255, 255, 0.85);
    }

    .btn-group {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 28px;
        position: relative;
    }

    button {
        padding: 14px 35px;
        border-radius: 50px;
        border: none;
        font-size: 1rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        position: relative;
        overflow: hidden;
        letter-spacing: 0.5px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        min-width: 140px;
    }

    button::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        transition: left 0.7s;
    }

    button:hover::before {
        left: 100%;
    }

    .btn-yes {
        background: linear-gradient(135deg, var(--primary), #ff7aa2);
        color: white;
        box-shadow: 0 10px 20px rgba(230, 57, 118, 0.25);
    }

    .btn-yes:hover {
        transform: translateY(-3px);
        box-shadow: 0 15px 30px rgba(230, 57, 118, 0.4);
    }

    .btn-no {
        background: rgba(255, 255, 255, 0.07);
        border: 1px solid rgba(255, 255, 255, 0.2);
        color: white;
    }

    .btn-no:hover {
        background: rgba(255, 255, 255, 0.12);
        border-color: rgba(255, 255, 255, 0.3);
    }

    .loader-container {
        margin-top: 28px;
        display: none;
        width: 100%;
    }

    .progress-wrapper {
        width: 100%;
        height: 6px;
        background: rgba(255,255,255,0.1);
        border-radius: 10px;
        overflow: hidden;
        margin-top: 12px;
        position: relative;
    }

    .progress-bar {
        height: 100%;
        width: 0%;
        background: linear-gradient(90deg, var(--primary), var(--secondary));
        transition: width 0.1s linear;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(230, 57, 118, 0.5);
    }

    .status-text {
        font-size: 0.9rem;
        opacity: 0.9;
        margin-bottom: 10px;
        font-weight: 500;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        color: rgba(255, 255, 255, 0.85);
    }

    .ticket {
        display: none;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 25px;
        border-radius: 16px;
        margin-top: 28px;
        animation: fadeIn 0.8s ease-out;
        backdrop-filter: blur(10px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }

    .ticket-header {
        font-family: 'Playfair Display', serif;
        font-size: 0.8rem;
        letter-spacing: 2px;
        opacity: 0.75;
        margin-bottom: 15px;
        font-weight: 600;
        color: var(--secondary);
        text-transform: uppercase;
    }

    .ticket-body {
        font-family: 'Dancing Script', cursive;
        font-size: 2.3rem;
        font-weight: 700;
        margin: 15px 0;
        color: white;
        text-shadow: 0 2px 10px rgba(230, 57, 118, 0.3);
    }

    .countdown-display {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 10px;
        margin-top: 18px;
    }

    .countdown-item {
        background: rgba(230, 57, 118, 0.1);
        border: 1px solid rgba(230, 57, 118, 0.3);
        border-radius: 10px;
        padding: 14px 8px;
        text-align: center;
        backdrop-filter: blur(10px);
    }

    .countdown-value {
        font-size: 1.7rem;
        font-weight: 700;
        color: var(--primary);
        font-family: 'Playfair Display', serif;
    }

    .countdown-label {
        font-size: 0.7rem;
        text-transform: uppercase;
        letter-spacing: 1px;
        opacity: 0.75;
        margin-top: 5px;
    }

    .ticket-footer {
        font-size: 0.9rem;
        margin-top: 15px;
        opacity: 0.8;
        font-style: italic;
        line-height: 1.6;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .hidden {
        display: none;
    }

    #start-overlay {
        position: fixed;
        inset: 0;
        background: linear-gradient(135deg, rgba(26, 20, 35, 0.95), rgba(45, 27, 61, 0.98));
        z-index: 9999;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        cursor: pointer;
        backdrop-filter: blur(5px);
        transition: opacity 1s ease;
    }

    .tap-icon {
        font-size: 4rem;
        animation: gentlePulse 2s infinite;
        margin-bottom: 20px;
        filter: drop-shadow(0 0 15px rgba(230, 57, 118, 0.3));
    }

    #start-overlay p {
        font-size: 1.3rem;
        font-weight: 500;
        letter-spacing: 2px;
        color: white;
        animation: gentlePulse 2s infinite;
        margin-top: 10px;
        font-family: 'Playfair Display', serif;
    }

    @keyframes gentlePulse {
        0%, 100% { transform: scale(1); opacity: 1; }
        50% { transform: scale(1.05); opacity: 0.9; }
    }

    .floating-heart {
        position: absolute;
        font-size: 1.5rem;
        animation: floatUp 6s ease-in forwards;
        opacity: 0;
        z-index: 1;
    }

    @keyframes floatUp {
        0% {
            transform: translateY(0) rotate(0deg);
            opacity: 0;
        }
        10% {
            opacity: 1;
        }
        90% {
            opacity: 0.8;
        }
        100% {
            transform: translateY(-100vh) rotate(360deg);
            opacity: 0;
        }
    }

    .music-player {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(10px);
        border-radius: 50px;
        padding: 10px 18px;
        display: flex;
        align-items: center;
        gap: 12px;
        z-index: 100;
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        opacity: 0.8;
        transition: all 0.3s;
    }

    .music-player:hover {
        opacity: 1;
        background: rgba(255, 255, 255, 0.12);
    }

    .music-info {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        min-width: 140px;
    }

    .song-title {
        font-size: 0.8rem;
        font-weight: 500;
        color: white;
    }

    .song-artist {
        font-size: 0.7rem;
        color: rgba(255, 255, 255, 0.6);
    }

    .music-controls {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .music-btn {
        background: transparent;
        border: none;
        color: white;
        font-size: 1.1rem;
        cursor: pointer;
        padding: 4px;
        border-radius: 50%;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s;
    }

    .music-btn:hover {
        background: rgba(255, 255, 255, 0.1);
    }

    .volume-slider {
        width: 70px;
        -webkit-appearance: none;
        height: 4px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 2px;
        outline: none;
    }

    .volume-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: var(--primary);
        cursor: pointer;
    }

    .volume-slider::-moz-range-thumb {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: var(--primary);
        cursor: pointer;
        border: none;
    }

    .progress-indicator {
        font-size: 0.65rem;
        color: rgba(255, 255, 255, 0.6);
        min-width: 50px;
        text-align: center;
    }

    .music-visualizer {
        width: 25px;
        height: 18px;
        display: flex;
        align-items: flex-end;
        justify-content: space-between;
    }

    .bar {
        width: 2.5px;
        background: var(--primary);
        border-radius: 2px;
        animation: bounce 1.5s ease infinite;
    }

    .bar:nth-child(1) { animation-delay: 0.1s; height: 40%; }
    .bar:nth-child(2) { animation-delay: 0.2s; height: 60%; }
    .bar:nth-child(3) { animation-delay: 0.3s; height: 80%; }
    .bar:nth-child(4) { animation-delay: 0.4s; height: 70%; }
    .bar:nth-child(5) { animation-delay: 0.5s; height: 50%; }

    @keyframes bounce {
        0%, 100% { transform: scaleY(1); }
        50% { transform: scaleY(0.5); }
    }

    .heart-beat {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 200px;
        height: 200px;
        border-radius: 50%;
        border: 1px solid rgba(230, 57, 118, 0.1);
        animation: heartPulse 4s ease-out infinite;
        z-index: -1;
        pointer-events: none;
    }

    @keyframes heartPulse {
        0% { width: 200px; height: 200px; opacity: 0.5; }
        100% { width: 400px; height: 400px; opacity: 0; }
    }

    .credit {
        position: fixed;
        bottom: 15px;
        right: 15px;
        font-size: 0.75rem;
        color: rgba(255, 255, 255, 0.5);
        opacity: 0.6;
        transition: opacity 0.3s;
        z-index: 50;
        font-family: 'Dancing Script', cursive;
    }

    .credit:hover {
        opacity: 1;
        color: rgba(255, 255, 255, 0.8);
    }
</style>
</head>
<body>

<audio id="bg-music"></audio>

<div id="start-overlay" onclick="startExperience()">
    <div class="tap-icon">ðŸ’–</div>
    <p>For Jamilah</p>
    <p style="font-size:0.9rem; margin-top:10px; opacity:0.7; font-family:'Poppins'">Click to begin</p>
</div>

<div id="bg-particles"></div>
<div class="heart-beat"></div>

<div class="music-player" id="music-player">
    <div class="music-visualizer">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
    </div>
    <div class="music-info">
        <div class="song-title" id="song-title">Loading...</div>
        <div class="song-artist" id="song-artist">For Jamilah</div>
    </div>
    <div class="music-controls">
        <button class="music-btn" onclick="toggleShuffle()" title="Shuffle"><i class="fas fa-random" id="shuffle-icon"></i></button>
        <button class="music-btn" onclick="togglePlay()"><i class="fas fa-play" id="play-icon"></i></button>
    </div>
    <div class="progress-indicator" id="song-progress">0:00</div>
    <input type="range" min="0" max="100" value="40" class="volume-slider" id="volume-slider" oninput="changeVolume(this.value)">
</div>

<div class="credit">Made by Jawi</div>

<div class="container">
    <div class="card" id="main-card">
        <h1 id="header-text">Jamilah</h1>
        
        <div class="typing-text" id="typewriter"></div>
        <div class="typing-cursor" id="typing-cursor"></div>

        <div class="definition-box" id="def-box">
            <div class="def-title"><i class="fas fa-book-open"></i> Meaning of "Jamilah"</div>
            <div class="def-content"><strong>Origin:</strong> Arabic | <strong>Meaning:</strong> Beautiful, Graceful, Elegant<br><em style="opacity:0.9;">"But babe, you're so much more than a definition..."</em></div>
        </div>

        <div class="btn-group hidden" id="interactions">
            <button class="btn-yes" onclick="acceptLove()"><i class="fas fa-heart"></i> Yes</button>
            <button class="btn-no" id="btn-no" onmouseover="dodgeButton()" onclick="dodgeButton()"><i class="fas fa-smile"></i> Maybe</button>
        </div>

        <div class="loader-container" id="loader-box">
            <div class="status-text" id="status-msg"><i class="fas fa-heart"></i> Preparing something special...</div>
            <div class="progress-wrapper"><div class="progress-bar" id="progress"></div></div>
        </div>

        <div class="ticket" id="final-ticket">
            <div class="ticket-header">âœ¨ Valentine's Countdown âœ¨</div>
            <div class="ticket-body">February 14</div>
            <div class="countdown-display" id="countdown-display">
                <div class="countdown-item">
                    <div class="countdown-value" id="days">00</div>
                    <div class="countdown-label">Days</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-value" id="hours">00</div>
                    <div class="countdown-label">Hours</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-value" id="minutes">00</div>
                    <div class="countdown-label">Mins</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-value" id="seconds">00</div>
                    <div class="countdown-label">Secs</div>
                </div>
            </div>
            <div class="ticket-footer">I can't wait to celebrate with you, babe. You mean the world to me. ðŸ’–</div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script>
    // MUSIC CONFIGURATION
    const songs = [
        { title: "Song 1", artist: "For Jamilah", url: "Song1.mp3" },
        { title: "Song 2", artist: "For Jamilah", url: "Song2.mp3" },
        { title: "Song 3", artist: "For Jamilah", url: "Song3.mp3" }
    ];

    const config = {
        name: "Jamilah",
        targetDate: "February 14, 2026 00:00:00",
        songDuration: 30
    };

    const lines = [
        "There's something I've been wanting to tell you, babe.",
        "I was thinking about your name the other day.",
        "Jamilah.",
        "It's such a beautiful name, really.",
        "So I decided to look up what it means.",
        "And honestly? I wasn't surprised.",
        "It means beautiful, graceful, elegant.",
        "But here's the thing...",
        "The dictionary doesn't tell the whole story.",
        "It doesn't mention how you light up every room.",
        "Or the way you make people feel seen and valued.",
        "It doesn't capture your kindness, babe.",
        "The way you smile that makes my heart skip.",
        "The way you laugh at things that bring you joy.",
        "You're not just beautiful on the outside.",
        "You're beautiful in every single way.",
        "In how you think, how you care, how you love.",
        "You make the world feel softer just by being in it.",
        "And I feel incredibly lucky to know you.",
        "Every single day with you feels like a blessing.",
        "You've changed my life in ways I can't even explain.",
        "So today, I have just one important question for you, babe..."
    ];

    const loadingMessages = [
        "Finding the perfect words...",
        "Gathering all my feelings...",
        "Writing your name in the stars...",
        "Preparing for our celebration...",
        "Almost ready, babe...",
        "Getting everything perfect for you..."
    ];

    // VARIABLES
    let currentSongIndex = 0;
    let isPlaying = false;
    let isShuffle = false;
    let playedSongs = [];
    const audioElement = document.getElementById('bg-music');

    let lineIndex = 0;
    let charIndex = 0;
    const typeElement = document.getElementById('typewriter');
    const cursorElement = document.getElementById('typing-cursor');
    const headerElement = document.getElementById('header-text');
    const defBox = document.getElementById('def-box');
    const btnGroup = document.getElementById('interactions');
    const btnNo = document.getElementById('btn-no');
    const btnYes = document.querySelector('.btn-yes');

    // MAIN FUNCTION
    function startExperience() {
        document.getElementById('start-overlay').style.opacity = '0';
        
        setTimeout(() => {
            document.getElementById('start-overlay').remove();
            createFloatingHearts(10);
        }, 800);
        
        initializeMusic();
        createParticles();
        typeWriter();
    }

    // MUSIC FUNCTIONS
    function initializeMusic() {
        audioElement.volume = 0.25;
        selectRandomSong();
        loadSong(currentSongIndex);
        
        audioElement.addEventListener('ended', handleSongEnd);
        audioElement.addEventListener('timeupdate', updateSongProgress);
        
        document.getElementById('volume-slider').value = audioElement.volume * 100;
        updateSongInfo();
        
        setTimeout(() => {
            audioElement.play().then(() => {
                isPlaying = true;
                updatePlayIcon();
            }).catch(() => {
                console.log("Click play to start");
            });
        }, 1500);
    }
    
    function selectRandomSong() {
        if (isShuffle) {
            let availableSongs = songs.filter((_, i) => !playedSongs.includes(i));
            
            if (availableSongs.length === 0) {
                playedSongs = [];
                availableSongs = songs;
            }
            
            const randomIndex = Math.floor(Math.random() * availableSongs.length);
            const selectedSong = availableSongs[randomIndex];
            currentSongIndex = songs.indexOf(selectedSong);
            
            if (!playedSongs.includes(currentSongIndex)) {
                playedSongs.push(currentSongIndex);
            }
        } else {
            currentSongIndex = (currentSongIndex + 1) % songs.length;
        }
    }
    
    function loadSong(index) {
        const song = songs[index];
        audioElement.src = song.url;
        audioElement.currentTime = 0;
        updateSongInfo();
    }
    
    function updateSongInfo() {
        const song = songs[currentSongIndex];
        document.getElementById('song-title').textContent = song.title;
        document.getElementById('song-artist').textContent = song.artist;
    }
    
    function handleSongEnd() {
        smoothFadeToNext();
    }
    
    function smoothFadeToNext() {
        let vol = audioElement.volume;
        const fadeOutInterval = setInterval(() => {
            vol -= 0.08;
            if (vol <= 0) {
                audioElement.volume = 0;
                audioElement.pause();
                clearInterval(fadeOutInterval);
                
                selectRandomSong();
                loadSong(currentSongIndex);
                
                if (isPlaying) {
                    setTimeout(() => {
                        audioElement.currentTime = 0;
                        audioElement.play().catch(e => console.log("Play error:", e));
                        smoothFadeIn();
                    }, 500);
                }
            } else {
                audioElement.volume = vol;
            }
        }, 40);
    }
    
    function smoothFadeIn() {
        let vol = 0;
        const targetVol = 0.25;
        const fadeInInterval = setInterval(() => {
            vol += 0.06;
            if (vol >= targetVol) {
                audioElement.volume = targetVol;
                clearInterval(fadeInInterval);
            } else {
                audioElement.volume = vol;
            }
        }, 40);
    }
    
    function togglePlay() {
        if (isPlaying) {
            audioElement.pause();
        } else {
            audioElement.play().catch(e => {
                alert("Please make sure Song1.mp3, Song2.mp3, Song3.mp3 are in the same folder");
            });
        }
        isPlaying = !isPlaying;
        updatePlayIcon();
    }
    
    function updatePlayIcon() {
        const icon = document.getElementById('play-icon');
        icon.className = isPlaying ? 'fas fa-pause' : 'fas fa-play';
    }
    
    function toggleShuffle() {
        isShuffle = !isShuffle;
        const shuffleIcon = document.getElementById('shuffle-icon');
        shuffleIcon.style.color = isShuffle ? '#e63976' : 'white';
        shuffleIcon.style.opacity = isShuffle ? '1' : '0.6';
        shuffleIcon.style.transition = 'all 0.3s ease';
        
        if (isShuffle) {
            playedSongs = [currentSongIndex];
        } else {
            playedSongs = [];
        }
    }
    
    function changeVolume(value) {
        audioElement.volume = value / 100;
    }
    
    function updateSongProgress() {
        if (!audioElement.duration) return;
        
        const current = audioElement.currentTime;
        const mins = Math.floor(current / 60);
        const secs = Math.floor(current % 60);
        
        document.getElementById('song-progress').textContent = 
            `${mins}:${secs < 10 ? '0' : ''}${secs}`;

        if (audioElement.currentTime >= config.songDuration && audioElement.currentTime < config.songDuration + 0.1) {
            smoothFadeToNext();
        }
    }

    // TYPING ANIMATION
    function typeWriter() {
        if (lineIndex < lines.length) {
            if (charIndex < lines[lineIndex].length) {
                typeElement.innerHTML += lines[lineIndex].charAt(charIndex);
                charIndex++;
                
                if (Math.random() > 0.96) {
                    createFloatingHearts(1);
                }
                
                setTimeout(typeWriter, 45);
            } else {
                if (lineIndex === 5) {
                    setTimeout(() => {
                        defBox.style.display = "block";
                        createFloatingHearts(3);
                        setTimeout(eraseLine, 4500);
                    }, 1200);
                } else if (lineIndex === 6) {
                    defBox.style.display = "none";
                    setTimeout(eraseLine, 2000);
                } else {
                    setTimeout(eraseLine, 1800);
                }
            }
        } else {
            typeElement.innerHTML = "Will you be my Valentine, babe?";
            cursorElement.style.display = "none";
            headerElement.innerHTML = "For You, Jamilah";
            btnGroup.classList.remove("hidden");
            
            createFloatingHearts(15);
            for(let i = 0; i < 20; i++) {
                setTimeout(() => {
                    confetti({
                        particleCount: 3,
                        angle: Math.random() * 360,
                        spread: 40,
                        origin: { x: Math.random(), y: Math.random() },
                        colors: ['#e63976', '#ffb3c6', '#ffd7ba'],
                        scalar: 0.75
                    });
                }, i * 100);
            }
        }
    }

    function eraseLine() {
        if (charIndex > 0) {
            typeElement.innerHTML = lines[lineIndex].substring(0, charIndex - 1);
            charIndex--;
            setTimeout(eraseLine, 20);
        } else {
            lineIndex++;
            typeWriter();
        }
    }

    // BUTTON INTERACTIONS
    let dodgeCount = 0;
    function dodgeButton() {
        dodgeCount++;
        
        const maxMove = 120;
        const x = Math.random() * (maxMove * 2) - maxMove;
        const y = Math.random() * (maxMove * 2) - maxMove;
        
        btnNo.style.transform = `translate(${x}px, ${y}px) rotate(${Math.random() * 5 - 2.5}deg)`;
        btnNo.style.transition = 'all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)';
        
        const scale = 1 + (dodgeCount * 0.1);
        btnYes.style.transform = `scale(${scale})`;
        
        const texts = ["Maybe", "Hmm...", "Really?", "Let me think...", "Are you sure?", "Come on...", "Okay fine...", "Yes! ðŸ’–"];
        
        const index = Math.min(dodgeCount - 1, texts.length - 1);
        btnNo.innerHTML = `<i class="fas fa-smile"></i> ${texts[index]}`;
        
        if (dodgeCount >= texts.length) {
            setTimeout(() => {
                btnNo.innerHTML = '<i class="fas fa-heart"></i> YES!';
                btnNo.style.background = 'linear-gradient(135deg, #e63976, #ff7aa2)';
                btnNo.style.border = 'none';
                btnNo.onclick = acceptLove;
                btnNo.onmouseover = null;
            }, 400);
        }
        
        confetti({
            particleCount: 5,
            spread: 35,
            origin: { y: 0.6 },
            colors: ['#e63976', '#ffb3c6'],
            scalar: 0.7
        });
    }

    function acceptLove() {
        btnGroup.style.display = 'none';
        headerElement.innerHTML = "Thank You, Babe ðŸ’–";
        typeElement.style.display = "none";
        
        createFloatingHearts(30);
        for(let i = 0; i < 50; i++) {
            setTimeout(() => {
                confetti({
                    particleCount: 3,
                    angle: Math.random() * 360,
                    spread: 35,
                    origin: { x: Math.random(), y: Math.random() },
                    colors: ['#e63976', '#ffb3c6', '#ffd7ba'],
                    scalar: 0.7
                });
            }, i * 50);
        }
        
        document.getElementById("loader-box").style.display = "block";
        runLoader();
    }

    function runLoader() {
        const bar = document.getElementById("progress");
        const status = document.getElementById("status-msg");
        let width = 0;
        let msgIndex = 0;

        const interval = setInterval(() => {
            width += 1.2;
            bar.style.width = width + "%";

            if (width % (100/loadingMessages.length) < 2 && msgIndex < loadingMessages.length) {
                status.innerHTML = `<i class="fas fa-heart"></i> ${loadingMessages[msgIndex]}`;
                msgIndex++;
            }

            if (width >= 100) {
                clearInterval(interval);
                setTimeout(showTicket, 700);
            }
        }, 25);
    }

    function showTicket() {
        document.getElementById("loader-box").style.display = "none";
        document.getElementById("final-ticket").style.display = "block";
        
        updateCountdown();
        setInterval(updateCountdown, 1000);
    }

    function updateCountdown() {
        const now = new Date().getTime();
        const target = new Date(config.targetDate).getTime();
        const distance = target - now;
        
        if (distance < 0) {
            document.getElementById("days").innerHTML = "00";
            document.getElementById("hours").innerHTML = "00";
            document.getElementById("minutes").innerHTML = "00";
            document.getElementById("seconds").innerHTML = "00";
            return;
        }

        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);
        
        document.getElementById("days").innerHTML = String(days).padStart(2, '0');
        document.getElementById("hours").innerHTML = String(hours).padStart(2, '0');
        document.getElementById("minutes").innerHTML = String(minutes).padStart(2, '0');
        document.getElementById("seconds").innerHTML = String(seconds).padStart(2, '0');
    }

    // VISUAL EFFECTS
    function createParticles() {
        const bg = document.getElementById('bg-particles');
        const emojis = ['â¤ï¸', 'ðŸ’«', 'âœ¨', 'ðŸŒ¸', 'ðŸ’–', 'ðŸ¥°'];
        
        setInterval(() => {
            const el = document.createElement('div');
            el.innerText = emojis[Math.floor(Math.random() * emojis.length)];
            el.style.position = 'absolute';
            el.style.left = Math.random() * 100 + 'vw';
            el.style.top = '100vh';
            el.style.fontSize = (Math.random() * 18 + 14) + 'px';
            el.style.opacity = Math.random() * 0.35 + 0.15;
            el.style.transition = 'top 10s linear, opacity 10s ease';
            bg.appendChild(el);
            
            setTimeout(() => {
                el.style.top = Math.random() * -20 + 'vh';
                el.style.opacity = '0';
            }, 100);
            
            setTimeout(() => el.remove(), 10000);
        }, 800);
    }

    function createFloatingHearts(count) {
        for(let i = 0; i < count; i++) {
            setTimeout(() => {
                const heart = document.createElement('div');
                heart.className = 'floating-heart';
                heart.innerHTML = ['â¤ï¸', 'ðŸ’–', 'ðŸ’•'][Math.floor(Math.random()*3)];
                heart.style.left = Math.random() * 90 + 5 + 'vw';
                heart.style.fontSize = (Math.random() * 24 + 16) + 'px';
                heart.style.animationDuration = (Math.random() * 2 + 4.5) + 's';
                document.body.appendChild(heart);
                
                setTimeout(() => heart.remove(), 6500);
            }, i * 120);
        }
    }
</script>

</body>
</html>